(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8713:function(e,t,s){Promise.resolve().then(s.bind(s,678))},678:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),n=s(2265);let l=e=>{let{className:t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t||"w-6 h-6",children:(0,a.jsx)("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})})},r=e=>{let{className:t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t||"w-6 h-6",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.5 9.75a6 6 0 0111.57-2.625 6 6 0 015.403 5.375 6.002 6.002 0 01-11.976 1.25A6 6 0 014.5 9.75zM12 6a3.75 3.75 0 00-3.75 3.75c0 2.072 1.678 3.75 3.75 3.75s3.75-1.678 3.75-3.75A3.75 3.75 0 0012 6z",clipRule:"evenodd"})})},o={id:"initial",role:"bot",content:"Hey. I'm Avika. How are you feeling right now?",timestamp:Date.now()},i=e=>{let{message:t}=e,s="bot"===t.role;return(0,a.jsxs)("div",{className:"flex items-start gap-3 my-4 ".concat(s?"justify-start":"justify-end"),children:[s&&(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center",children:(0,a.jsx)(r,{className:"w-5 h-5 text-cyan-300"})}),(0,a.jsxs)("div",{className:"max-w-md p-3 rounded-lg ".concat(s?"bg-slate-700 text-gray-200 rounded-tl-none":"bg-cyan-600 text-white rounded-tr-none"),children:[(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-line",children:t.content}),t.videos&&t.videos.length>0&&(0,a.jsx)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:t.videos.map(e=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"bg-slate-600 hover:bg-slate-500 transition-colors duration-200 p-2 rounded-md text-center text-xs text-cyan-200",children:["\uD83C\uDFA5 ",e.language]},e.url))})]})]})},c=()=>(0,a.jsxs)("div",{className:"flex items-start gap-3 my-4 justify-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center",children:(0,a.jsx)(r,{className:"w-5 h-5 text-cyan-300"})}),(0,a.jsxs)("div",{className:"max-w-md p-3 rounded-lg bg-slate-700 text-gray-200 rounded-tl-none flex items-center space-x-1",children:[(0,a.jsx)("span",{className:"text-sm",children:"Avika is thinking"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-cyan-300 rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-cyan-300 rounded-full animate-bounce [animation-delay:-0.15s]"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-cyan-300 rounded-full animate-bounce"})]})]});function d(){let[e,t]=(0,n.useState)([o]),[s,r]=(0,n.useState)(null),[d,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(!1),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e,x]);let f=(0,n.useCallback)(async e=>{if(e.preventDefault(),!d.trim()||x)return;let s={id:"user-".concat(Date.now()),role:"user",content:d.trim(),timestamp:Date.now()};m(""),u(!0),t(e=>{let a=[...e,s];return fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:a})}).then(e=>{if(!e.ok)throw Error("Request failed with status ".concat(e.status));return e.json()}).then(e=>{let s={id:"bot-".concat(Date.now()),role:"bot",content:e.text,timestamp:Date.now(),videos:e.videos};t(e=>[...e,s]),r(e.mood)}).catch(e=>{console.error("Failed to fetch Avika response:",e);let s={id:"error-".concat(Date.now()),role:"bot",content:"Sorry, something went wrong. Let's take a breath and try again soon.",timestamp:Date.now()};t(e=>[...e,s])}).finally(()=>{u(!1)}),a})},[d,x]);return(0,a.jsxs)("div",{className:"flex flex-col h-svh bg-slate-900 text-white font-sans",children:[(0,a.jsx)("header",{className:"p-4 border-b border-slate-800 shadow-md bg-slate-900/70 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-cyan-300",children:"Avika"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Your quiet support companion"})]}),s&&"general"!==s.dominantMood&&(0,a.jsxs)("div",{className:"text-[11px] sm:text-xs text-slate-400",children:["Mood: ",(0,a.jsx)("span",{className:"text-cyan-300 font-medium",children:s.dominantMood})]})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[e.map(e=>(0,a.jsx)(i,{message:e},e.id)),x&&(0,a.jsx)(c,{}),(0,a.jsx)("div",{ref:h})]})}),(0,a.jsx)("footer",{className:"p-4 bg-slate-900/80 backdrop-blur-sm border-t border-slate-800",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("form",{onSubmit:f,className:"flex items-center bg-slate-800 rounded-lg p-2 border border-slate-700 focus-within:border-cyan-500 transition-colors",children:[(0,a.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Tell me what's on your mind...",className:"flex-1 bg-transparent focus:outline-none px-2 text-gray-200 placeholder-slate-500",disabled:x,suppressHydrationWarning:!0}),(0,a.jsx)("button",{type:"submit",disabled:x||!d.trim(),className:"p-2 rounded-md bg-cyan-600 hover:bg-cyan-500 disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(l,{className:"w-5 h-5 text-white"})})]})})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8713)}),_N_E=e.O()}]);